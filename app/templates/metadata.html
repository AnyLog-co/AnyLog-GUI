



{% extends "base.html" %}

{% block content %}

{% if selection %}
<!-- Add the usr path to the form (if provided)  -->
<form action="{{url_for('metadata')}}/{{selection}}" method="POST">
{% else %}
<form action="{{url_for('metadata')}}" method="POST">
{% endif %}

<ul class="tree">

    {% for node in nodes_list %}

        {% if node %}        <!--  The node is not None   -->

                {% if node.first_child %}
                    <ul>        <!--  Start unordered list   -->
                {% endif %}

                <!--  List Item starts  -->
                {% if node.last_child  %}
                    <li class="last">
                {% else %}
                    <li>
                {% endif %}

                {% if node.name  %}
                        <!-- View position or select position  -->
                        {% if node.details  %}
                             <input type="submit" value="View" name={{node.id}}>   &nbsp
                        {% endif %}
                        {% if selection  %}
                            <a href="{{url_for('metadata')}}/{{selection}}@{{node.name}}">{{node.name}}</a>
                        {% else %}
                            <a href="{{url_for('metadata')}}/{{node.name}}">{{node.name}}</a>
                        {% endif %}
                {% endif %}

                {% if node.with_children %}
                    
                {% else %}
                    </li>
                {% endif %}

        {% else %}
             <!--  Node is None - end of list -->
                </li>
                </ul>
        {% endif %}
    {% endfor %}

</ul>

{% endblock %}
